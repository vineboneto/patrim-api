generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Owner {
  id           Int    @id @default(autoincrement())
  name         String
  Sector       Sector    @relation(fields: [sectorId], references: [id])
  sectorId     Int
  Patrimony    Patrimony[]
}

model Patrimony {
  id           Int    @id @default(autoincrement())
  number       String  @unique
  brand        String 
  description  String
  Category     Category  @relation(fields: [categoryId], references: [id])
  categoryId   Int
  Owner        Owner     @relation(fields: [ownerId], references: [id])
  ownerId      Int
  Place        Place     @relation(fields: [placeId], references: [id])
  placeId      Int
}

model Place {
  id          Int     @id @default(autoincrement())
  name        String  @unique
  Patrimony   Patrimony[]
}

model Sector {
  id           Int    @id @default(autoincrement())
  name         String @unique
  Owner        Owner[]
}

model Category {
  id           Int    @id @default(autoincrement())
  name         String @unique
  Patrimony    Patrimony[]
}

model User {
  id          Int     @id @default(autoincrement())
  name        String
  password    String
  accessToken String?
  role        String?
  email       String
}

model LogError {
  id          Int     @id @default(autoincrement())
  stack       String
  date        DateTime 
}
